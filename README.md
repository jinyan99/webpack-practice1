## webpackå®è·µç»ƒä¹ é¡¹ç›®1

> å‚è€ƒæ˜é‡‘æ–‡ç« -9ä¸ªä¸»è¦è¯¾é¢˜ [ä¸€æ­¥æ­¥ä»é›¶å¼€å§‹ç”¨ webpack æ­å»ºä¸€ä¸ªå¤§å‹é¡¹ç›®](https://juejin.cn/post/6844904007903772679)

> [å®Œæ•´24ä¸ªè¯¾é¢˜æ¨¡ä»¿å‚ç…§é¡¹ç›®æºç ](https://github.com/yezishan/webpack-box)
### å‰è¨€

- æ ¸å¿ƒæ‰€ç”¨ç‰ˆæœ¬
  - "webpack": "^4.41.2"
  - "webpack-cli": "^3.3.10"
  - node 10.16.3
  - "webpack-dev-server": "^3.9.0"

æœ¬æ–‡ä»ä¸‹é¢å‡ ä¸ªè¯¾é¢˜æ¥å®ç°

- è¯¾é¢˜ 1ï¼š[åˆæ¢ webpackï¼Ÿæ¢ç©¶ webpack æ‰“åŒ…åŸç†](#1)
- è¯¾é¢˜ 2ï¼š[æ­å»ºå¼€å‘ç¯å¢ƒè·Ÿç”Ÿäº§ç¯å¢ƒ](#2)
- è¯¾é¢˜ 3ï¼š[åŸºç¡€é…ç½®ä¹‹loader](#3)
- è¯¾æ—¶ 4ï¼š[webpackæ€§èƒ½ä¼˜åŒ–](#4)
- è¯¾æ—¶ 5ï¼š[æ‰‹å†™loaderå®ç°å¯é€‰é“¾](#5)
- è¯¾æ—¶ 6ï¼š[webpackç¼–è¯‘ä¼˜åŒ–](#6)
- è¯¾æ—¶ 7ï¼š[å¤šé¡µé¢é…ç½®](#7)
- è¯¾æ—¶ 8ï¼š[æ‰‹å†™ä¸€ä¸ªwebpackæ’ä»¶](#8)
- è¯¾æ—¶ 9ï¼š[æ„å»º ssr](#9)

## è¯¾é¢˜6. webpackç¼–è¯‘ä¼˜åŒ–

### cache-loader

cache-loader ä¸»è¦æ˜¯å°†æ‰“åŒ…å¥½çš„æ–‡ä»¶ç¼“å­˜åœ¨ç¡¬ç›˜çš„ä¸€ä¸ªç›®å½•é‡Œï¼Œä¸€èˆ¬å­˜åœ¨ node_modules/.cache ä¸‹ï¼Œå½“ä½ å†æ¬¡ build çš„æ—¶å€™å¦‚æœæ­¤æ–‡ä»¶æ²¡æœ‰ä¿®æ”¹å°±ä¼šä»ç¼“å­˜ä¸­è¯»å–å·²ç»ç¼–è¯‘è¿‡çš„æ–‡ä»¶ï¼Œåªæœ‰æœ‰æ”¹åŠ¨çš„æ‰ä¼šè¢«ç¼–è¯‘ï¼Œè¿™æ ·å°±å¤§å¤§é™ä½äº†ç¼–è¯‘çš„æ—¶é—´ã€‚å°¤å…¶æ˜¯é¡¹ç›®è¶Šå¤§æ—¶è¶Šæ˜æ˜¾ã€‚

æ­¤é¡¹ç›®ä½¿ç”¨å‰åæ•°æ®å¯¹æ¯” 3342ms --> 2432ms æ•ˆæœè¿˜æ˜¯æ¯”è¾ƒæ˜æ˜¾ï¼šæ„å»ºç¼–è¯‘æ—¶é—´èƒ½æ˜æ˜¾å‡å°‘1000mså·¦å³

è¿™é‡Œåªå¯¹ babel åŠ å…¥äº† cache-loaderï¼Œå› ä¸ºæˆ‘ä»¬çš„ ts/js éƒ½æ˜¯ç”± babel è¿›è¡Œç¼–è¯‘çš„ï¼Œä¸éœ€è¦å¯¹ ts-loader ç¼“å­˜ï¼ˆæˆ‘ä»¬ä¹Ÿæ²¡æœ‰ç”¨åˆ°

> è§config/cacheLoader.jsæ–‡ä»¶

### DllPlugin
DllPlugin æ˜¯å°†ç¬¬ä¸‰æ–¹é•¿æœŸä¸å˜çš„åŒ…ä¸å®é™…é¡¹ç›®éš”ç¦»å¼€æ¥å¹¶åˆ†åˆ«æ‰“åŒ…ï¼Œå½“æˆ‘ä»¬ build æ—¶å†å°†å·²ç»æ‰“åŒ…å¥½çš„ dll åŒ…å¼•è¿›æ¥å°± ok äº†
æˆ‘æå–äº†ä¸¤ä¸ªåŒ… vueã€reactï¼Œé€Ÿåº¦å·®ä¸å¤šæå‡äº† 200msï¼Œä» 2698ms åˆ° 2377ms
**æ‰“åŒ… dll**ï¼šè§build/dll.jsï¼Œconfig/BundleAnalyzerPlugin
**å°†dllåˆå¹¶**ï¼šè§config/useDllPlugin.js


### threadLoader
æµ‹è¯•æ•ˆæœå˜å·®äº† ğŸ˜…ï¼Œçº¿ç¨‹æ•°è¶Šå°ç¼–è¯‘é€Ÿåº¦è¶Šå¿«
> è§threadLoader.js
